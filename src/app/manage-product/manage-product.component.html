<div class="manage-container">
  <h2>Manage Product</h2>

  <div class="task-selector">
    <select (change)="selectTask($any($event.target).value)">
      <option value="none">Select an Action</option>
      <option value="update">Update Product Details</option>
      <option value="delete">Delete Product</option>
    </select>
  </div>

  <hr class="divider" />

  <form *ngIf="currentTask === 'update'" [formGroup]="updateForm" (ngSubmit)="updateProduct()" class="update-container">
    <h3>Update Product Details</h3>
    <div class="form-grid">
      <div class="form-group">
        <label>Product Name</label>
        <input formControlName="name">
      </div>
      <div class="form-group">
        <label>Brand</label>
        <input formControlName="brand">
      </div>
      <div class="form-group">
        <label>Category</label>
        <input formControlName="category">
      </div>
      <div class="form-group">
        <label>Price</label>
        <input type="number" formControlName="price" min="1">
      </div>
      <div class="form-group">
        <label>Discount (%)</label>
        <input type="number" formControlName="discount" min="0">
      </div>
      <div class="form-group">
        <label>Initial Stock</label>
        <input type="number" formControlName="initialStock" min="1">
      </div>
      <div class="form-group">
        <label>Min Stock Level</label>
        <input type="number" formControlName="minStockLevel" min="0">
      </div>
      <div class="form-group">
        <label>Status</label>
        <select formControlName="isActive">
          <option [ngValue]="true">Active</option>
          <option [ngValue]="false">Inactive</option>
        </select>
      </div>
      <div class="form-group full-width">
        <label>Description</label>
        <textarea formControlName="description"></textarea>
      </div>
    </div>

    <div *ngIf="message" class="status-message">
      {{message}}
    </div>

    <div class="button-group">
      <button type="submit" class="save-button" [disabled]="updateForm.invalid">
        Save Changes
      </button>
    </div>
  </form>

  <div *ngIf="currentTask === 'delete'" class="danger-section task-section">
    <h3>Danger Zone</h3>
    <p><strong>Warning:</strong> This action cannot be undone.</p>
    <button class="button-delete" (click)="openConfirmationBox()">
      Delete Product
    </button>
  </div>

  <div class="navigation-footer">
    <button class="button-back" routerLink="/home">Back to Inventory</button>
  </div>
</div>

<div class="confirm-box" *ngIf="confirmationBox">
  <div class="modal-box">
    <p><strong>Warning</strong>: Deleting this product will hide it from the customers.</p>
    <div class="options">
      <button class="button-yes" (click)="deleteProduct()">Yes</button>
      <button class="button-no" (click)="closeConfirmationBox()">No</button>
    </div>
  </div>
</div>
